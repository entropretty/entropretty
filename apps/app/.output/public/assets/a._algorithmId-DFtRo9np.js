import{c as B,r as E,j as i,u as M,L as F,e as K}from"./main-D_QOtJ75.js";import{B as L}from"./button-BnWcWO71.js";import{A as O}from"./AlgorithmBitmap-CUFHLwpA.js";import{u as C,S as P}from"./useDisplaySizes-DoYTHURn.js";import{s as D,g as T,d as V}from"./index-BzRZEjlo.js";import{u as q}from"./index-DFufhFO-.js";import{L as G}from"./LikeButton-Bzkwyt-l.js";import{A as X}from"./AlgorithmInfo-4eJFaIHW.js";import{F as H}from"./FamilyKindBadge-rjTMkzGm.js";import{u as J}from"./useAlgorithm-XwL09dTX.js";import"./utils-CjfV1Qjd.js";import"./useUsersLikes-BZbDMPmT.js";import"./useQuery-tapXCO0W.js";import"./useBaseQuery-BJjxcAKU.js";import"./createLucideIcon-4ydf6LMZ.js";function Q(l){const e=B.c(14),{className:t,scrollAmount:r,scrollInterval:a}=l,c=t===void 0?"":t,o=r===void 0?2:r,s=a===void 0?16:a,[n,m]=E.useState(!1),f=E.useRef(null);let u;e[0]!==o||e[1]!==s?(u=()=>{f.current||(f.current=setInterval(()=>{window.scrollBy(0,o)},s))},e[0]=o,e[1]=s,e[2]=u):u=e[2];const _=u;let x;e[3]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{f.current&&(clearInterval(f.current),f.current=null)},e[3]=x):x=e[3];const j=x;let g;e[4]!==n||e[5]!==_?(g=()=>{n?(j(),m(!1)):(_(),m(!0))},e[4]=n,e[5]=_,e[6]=g):g=e[6];const v=g;let y,S;e[7]===Symbol.for("react.memo_cache_sentinel")?(y=()=>()=>{j()},S=[j],e[7]=y,e[8]=S):(y=e[7],S=e[8]),E.useEffect(y,S);const h=n?void 0:"ghost",p=n?"STOP":"SCROLL";let d;return e[9]!==c||e[10]!==p||e[11]!==h||e[12]!==v?(d=i.jsx(L,{variant:h,onClick:v,className:c,children:p}),e[9]=c,e[10]=p,e[11]=h,e[12]=v,e[13]=d):d=e[13],d}const R=(l,e)=>{const t=T(l);return V(t,{size:e})};function U(l){const e=B.c(37),{algorithm:t,className:r}=l,a=r===void 0?"":r;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=[],e[0]=c):c=e[0];const[o,s]=E.useState(c);let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n={threshold:0,rootMargin:"400px"},e[1]=n):n=e[1];const{ref:m,inView:f}=q(n),{infinite:u}=C();let _,x;e[2]!==t.family_kind?(_=()=>{const I=Array.from({length:8},()=>R(t.family_kind,8)).reduce(Z,[]);s(I)},x=[t.family_kind],e[2]=t.family_kind,e[3]=_,e[4]=x):(_=e[3],x=e[4]),E.useEffect(_,x);let j;e[5]!==t.family_kind||e[6]!==o.length?(j=()=>{if(o.length===0)return;const I=Array.from({length:3},()=>R(t.family_kind,8)).reduce(Y,[]);s(z=>[...z,...I.map(W)])},e[5]=t.family_kind,e[6]=o.length,e[7]=j):j=e[7];const g=j;let v,y;e[8]!==f||e[9]!==g?(v=()=>{f&&g()},y=[f,g],e[8]=f,e[9]=g,e[10]=v,e[11]=y):(v=e[10],y=e[11]),E.useEffect(v,y);const S=`flex w-full flex-col ${a} relative`;let h;if(e[12]!==t.id||e[13]!==u||e[14]!==o){let A;e[16]!==t.id||e[17]!==u?(A=I=>i.jsx(O,{algorithmId:t.id,seed:I,size:u,scale:2},D(I)),e[16]=t.id,e[17]=u,e[18]=A):A=e[18],h=o.map(A),e[12]=t.id,e[13]=u,e[14]=o,e[15]=h}else h=e[15];let p;e[19]!==m?(p=i.jsx("div",{ref:m,className:"h-4 w-full"}),e[19]=m,e[20]=p):p=e[20];let d;e[21]!==h||e[22]!==p?(d=i.jsx("div",{className:"h-full w-full p-4",children:i.jsxs("div",{className:"mx-auto flex w-full flex-wrap items-center justify-evenly gap-4 sm:gap-16",children:[h,p]})}),e[21]=h,e[22]=p,e[23]=d):d=e[23];let b;e[24]!==t.family_kind?(b=i.jsx(H,{familyKind:t.family_kind,className:"absolute left-0 top-[-22px] z-10"}),e[24]=t.family_kind,e[25]=b):b=e[25];let k,N;e[26]!==t?(k=i.jsx(X,{algorithm:t}),N=i.jsx(ee,{algorithm:t}),e[26]=t,e[27]=k,e[28]=N):(k=e[27],N=e[28]);let w;e[29]!==b||e[30]!==k||e[31]!==N?(w=i.jsxs("div",{className:"bg-background border-background-200 fixed bottom-0 left-0 right-0 flex w-full items-center justify-between gap-8 gap-y-2 border p-4 pb-8 text-gray-600 sm:pb-4",children:[b,k,N]}),e[29]=b,e[30]=k,e[31]=N,e[32]=w):w=e[32];let $;return e[33]!==d||e[34]!==w||e[35]!==S?($=i.jsx("div",{className:"relative flex flex-col",children:i.jsxs("div",{className:S,children:[d,w]})}),e[33]=d,e[34]=w,e[35]=S,e[36]=$):$=e[36],$}function W(l){return[...l]}function Y(l,e){return l.concat(e)}function Z(l,e){return l.concat(e)}const ee=l=>{const e=B.c(13),{algorithm:t}=l,{user:r}=M();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(Q,{className:"hidden md:block"}),e[0]=a):a=e[0];const c=`/demo/${t.id}`;let o;e[1]!==c?(o=i.jsx(L,{className:"hidden md:block",asChild:!0,variant:"link",children:i.jsx(F,{to:c,children:"DEMO"})}),e[1]=c,e[2]=o):o=e[2];let s;e[3]!==t.id||e[4]!==r?(s=r&&i.jsx(L,{asChild:!0,variant:"link",children:i.jsx(F,{to:`/create?remix=${t.id}`,children:"REMIX"})}),e[3]=t.id,e[4]=r,e[5]=s):s=e[5];let n;e[6]!==t||e[7]!==r?(n=r&&i.jsx(G,{algorithm:t}),e[6]=t,e[7]=r,e[8]=n):n=e[8];let m;return e[9]!==o||e[10]!==s||e[11]!==n?(m=i.jsxs("div",{className:"flex w-auto flex-row items-center justify-end gap-2 md:w-auto",children:[a,o,s,n]}),e[9]=o,e[10]=s,e[11]=n,e[12]=m):m=e[12],m};function te(){const l=B.c(8);let e;l[0]===Symbol.for("react.memo_cache_sentinel")?(e={from:"/_layout/a/$algorithmId"},l[0]=e):e=l[0];const{algorithmId:t}=K(e),{infinite:r}=C(),{data:a,isLoading:c}=J(Number(t));if(c){let s;l[1]!==r?(s=Array(48).fill(0).map((m,f)=>i.jsx(P,{style:{width:r,height:r},className:"aspect-square rounded-none"},f)),l[1]=r,l[2]=s):s=l[2];let n;return l[3]!==s?(n=i.jsx("div",{className:"h-full w-full p-4",children:i.jsx("div",{className:"flex flex-col gap-4 p-0 sm:p-8",children:i.jsx("div",{className:"mx-auto flex w-full flex-wrap items-center justify-evenly gap-4 sm:gap-16",children:s})})}),l[3]=s,l[4]=n):n=l[4],n}if(!a){let s;return l[5]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsx("div",{children:"Algorithm not found"}),l[5]=s):s=l[5],s}let o;return l[6]!==a?(o=i.jsx("div",{className:"flex flex-col gap-4 p-0 sm:p-8",children:i.jsx(U,{algorithm:a})}),l[6]=a,l[7]=o):o=l[7],o}const ge=te;export{ge as component};
