import{f as _,s as v,c as N,e as P,r as A,j as t}from"./main-D_QOtJ75.js";import{a as y,A as S}from"./AlgorithmCardSkeleton-BfKjjmlv.js";import{u as w}from"./useInfiniteQuery-it1EuC-d.js";import{u as E}from"./index-DFufhFO-.js";import"./LikeButton-Bzkwyt-l.js";import"./button-BnWcWO71.js";import"./utils-CjfV1Qjd.js";import"./useUsersLikes-BZbDMPmT.js";import"./useQuery-tapXCO0W.js";import"./useBaseQuery-BJjxcAKU.js";import"./createLucideIcon-4ydf6LMZ.js";import"./AlgorithmInfo-4eJFaIHW.js";import"./FamilyKindBadge-rjTMkzGm.js";import"./AlgorithmBitmap-CUFHLwpA.js";import"./index-BzRZEjlo.js";import"./useDisplaySizes-DoYTHURn.js";const j=3;function b(e){const l=_();return w({queryKey:["algorithms","user",e],enabled:!!e,initialPageParam:0,queryFn:async({pageParam:r})=>{const i=r*j,c=i+j-1,{data:a,error:u}=await v.from("algorithms_with_user_profile").select().eq("username",e).order("created_at",{ascending:!1}).range(i,c);if(a)for(const o of a)l.addAlgorithm(o.id,o.content,o.family_kind);if(u)throw u;return a},getNextPageParam:(r,i)=>r.length===j?i.length:void 0})}function q(){const e=N.c(21);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={from:"/_layout/u/$username"},e[0]=l):l=e[0];const{username:r}=P(l),{ref:i,inView:c}=E(),{data:a,isLoading:u,fetchNextPage:o,hasNextPage:n,isFetchingNextPage:m}=b(r);let h,g;if(e[1]!==o||e[2]!==n||e[3]!==c||e[4]!==m?(h=()=>{c&&n&&!m&&o()},g=[c,o,n,m],e[1]=o,e[2]=n,e[3]=c,e[4]=m,e[5]=h,e[6]=g):(h=e[5],g=e[6]),A.useEffect(h,g),!r){let s;return e[7]!==r?(s=t.jsxs("div",{children:["No user with username ",r," found"]}),e[7]=r,e[8]=s):s=e[8],s}if(u){let s;return e[9]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx("div",{className:"mx-auto my-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx(y,{}),t.jsx(y,{})]})}),e[9]=s):s=e[9],s}let f;e[10]!==a?.pages?(f=a?.pages.map(C),e[10]=a?.pages,e[11]=f):f=e[11];let d;e[12]!==n||e[13]!==m?(d=m?t.jsx("div",{children:"Loading more..."}):n?t.jsx("div",{children:"Load more"}):t.jsx("div",{children:"No more algorithms"}),e[12]=n,e[13]=m,e[14]=d):d=e[14];let p;e[15]!==i||e[16]!==d?(p=t.jsx("div",{ref:i,className:"py-4 text-center",children:d}),e[15]=i,e[16]=d,e[17]=p):p=e[17];let x;return e[18]!==f||e[19]!==p?(x=t.jsx("div",{className:"mx-auto my-4",children:t.jsxs("div",{className:"space-y-4",children:[f,p]})}),e[18]=f,e[19]=p,e[20]=x):x=e[20],x}function C(e){return e.map(I)}function I(e){return t.jsx(S,{algorithm:e},e.id)}const M=q;export{M as component};
