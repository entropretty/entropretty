import{r as l,j as o,c as J,e as X}from"./main-D_QOtJ75.js";import{u as Y,S as Z}from"./useDisplaySizes-DoYTHURn.js";import{A as ee}from"./AlgorithmBitmap-CUFHLwpA.js";import{s as A,g as B,d as V}from"./index-BzRZEjlo.js";import{c as te}from"./utils-CjfV1Qjd.js";import{u as se,f as ne,L as W,A as ie,m as O}from"./proxy-zRc3mXX4.js";import{u as re}from"./useAlgorithm-XwL09dTX.js";import"./useQuery-tapXCO0W.js";import"./useBaseQuery-BJjxcAKU.js";const oe=l.createContext(null);function le(){const t=l.useRef(!1);return se(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function ce(){const t=le(),[e,i]=l.useState(0),r=l.useCallback(()=>{t.current&&i(e+1)},[e]);return[l.useCallback(()=>ne.postRender(r),[r]),e]}const ae=t=>!t.isLayoutDirty&&t.willUpdate(!1);function H(){const t=new Set,e=new WeakMap,i=()=>t.forEach(ae);return{add:r=>{t.add(r),e.set(r,r.addEventListener("willUpdate",i))},remove:r=>{t.delete(r);const a=e.get(r);a&&(a(),e.delete(r)),i()},dirty:i}}const Q=t=>t===!0,me=t=>Q(t===!0)||t==="id",ue=({children:t,id:e,inherit:i=!0})=>{const r=l.useContext(W),a=l.useContext(oe),[b,c]=ce(),d=l.useRef(null),s=r.id||a;d.current===null&&(me(i)&&s&&(e=e?s+"-"+e:s),d.current={id:e,group:Q(i)&&r.group||H()});const _=l.useMemo(()=>({...d.current,forceRender:b}),[c]);return o.jsx(W.Provider,{value:_,children:t})};function fe(t){const e=J.c(38),{algorithm:i,className:r,startDelay:a}=t,b=r===void 0?"":r,c=a===void 0?0:a;let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[0]=d):d=e[0];const[s,_]=l.useState(d),[m,j]=l.useState(0),[p,h]=l.useState(!1),{demo:v}=Y();let y;e[1]!==i.family_kind||e[2]!==s?(y=()=>{if(s.length===0)return;const S=B(i.family_kind),R=V(S,{size:3}),U=new Set(s.map(ye)),K=R.filter(D=>!U.has(A([...D])));_(D=>[...D,...K.map(he)])},e[1]=i.family_kind,e[2]=s,e[3]=y):y=e[3];const u=y;let f,x;e[4]!==c?(f=()=>{if(c===0){h(!0);return}const S=setTimeout(()=>{h(!0)},c);return()=>clearTimeout(S)},x=[c],e[4]=c,e[5]=f,e[6]=x):(f=e[5],x=e[6]),l.useEffect(f,x);let g;e[7]!==m||e[8]!==u||e[9]!==s.length||e[10]!==p?(g=()=>{if(!p||s.length===0)return;const S=setInterval(()=>{m+1===s.length&&u(),j(R=>(R+1)%s.length)},1800);return()=>clearInterval(S)},e[7]=m,e[8]=u,e[9]=s.length,e[10]=p,e[11]=g):g=e[11];let n;e[12]!==m||e[13]!==u||e[14]!==s||e[15]!==p?(n=[m,u,s,p],e[12]=m,e[13]=u,e[14]=s,e[15]=p,e[16]=n):n=e[16],l.useEffect(g,n);let w,k;if(e[17]!==i.family_kind?(k=()=>{const S=B(i.family_kind),R=V(S,{size:3}),U=Array.from(new Set(R.map(pe))).map(K=>R.find(D=>A(D)===K)).map(de);_(U)},w=[i.family_kind],e[17]=i.family_kind,e[18]=w,e[19]=k):(w=e[18],k=e[19]),l.useEffect(k,w),s[m]===void 0)return null;const z=`flex flex-col items-center justify-center bg-white p-10 ${b}`;let C;e[20]===Symbol.for("react.memo_cache_sentinel")?(C=te("flex w-full flex-col items-center justify-center"),e[20]=C):C=e[20];const T=s[m];let N;e[21]!==T?(N=A(T),e[21]=T,e[22]=N):N=e[22];let L,q,F,G;e[23]===Symbol.for("react.memo_cache_sentinel")?(L={opacity:0,filter:"blur(2px)"},q={opacity:1,scale:1,filter:"blur(0px)"},F={opacity:0,filter:"blur(2px)"},G={duration:.5,ease:"easeInOut"},e[23]=L,e[24]=q,e[25]=F,e[26]=G):(L=e[23],q=e[24],F=e[25],G=e[26]);const $=s[m];let M;e[27]===Symbol.for("react.memo_cache_sentinel")?(M={width:"100%",height:"100%",display:"block",objectFit:"contain"},e[27]=M):M=e[27];let I;e[28]!==i.id||e[29]!==v||e[30]!==$?(I=o.jsx(ee,{algorithmId:i.id,seed:$,size:v,scale:2,style:M}),e[28]=i.id,e[29]=v,e[30]=$,e[31]=I):I=e[31];let E;e[32]!==N||e[33]!==I?(E=o.jsx("div",{className:C,children:o.jsx("div",{className:"relative aspect-square h-[70vh] overflow-hidden",children:o.jsx(ie,{mode:"sync",children:o.jsx(O.div,{initial:L,animate:q,exit:F,transition:G,className:"absolute inset-0 flex items-center justify-center p-8",children:I},N)})})}),e[32]=N,e[33]=I,e[34]=E):E=e[34];let P;return e[35]!==z||e[36]!==E?(P=o.jsx("div",{className:z,children:E}),e[35]=z,e[36]=E,e[37]=P):P=e[37],P}function de(t){return[...t]}function pe(t){return A(t)}function he(t){return[...t]}function ye(t){return A(t)}function xe(){const t=J.c(22);let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e={from:"/demo/$algorithmId"},t[0]=e):e=t[0];const{algorithmId:i}=X(e);let r;t[1]===Symbol.for("react.memo_cache_sentinel")?(r=[],t[1]=r):r=t[1];const[a,b]=l.useState(r),{data:c,isLoading:d}=re(Number(i));let s;t[2]!==a.length?(s=()=>{const n=a.length;return n===1?1.7:n===2?1.02:1},t[2]=a.length,t[3]=s):s=t[3];const _=s;let m,j;if(t[4]!==c?(m=()=>{b([]),c&&[{indices:[1],delay:0},{indices:[0],delay:4e3},{indices:[2],delay:8e3}].forEach(w=>{const{indices:k,delay:z}=w;setTimeout(()=>{b(C=>[...C,...k])},z)})},j=[c],t[4]=c,t[5]=m,t[6]=j):(m=t[5],j=t[6]),l.useEffect(m,j),d){let n;return t[7]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("div",{className:"flex h-screen w-screen flex-col items-center justify-center bg-black",children:o.jsx(Z,{className:"aspect-square h-[70vh] w-[70vh]"})}),t[7]=n):n=t[7],n}if(!c){let n;return t[8]===Symbol.for("react.memo_cache_sentinel")?(n=o.jsx("div",{children:"Algorithm not found"}),t[8]=n):n=t[8],n}const p=_();let h;t[9]!==p?(h={scale:p},t[9]=p,t[10]=h):h=t[10];let v,y;t[11]===Symbol.for("react.memo_cache_sentinel")?(v={duration:1,ease:[.25,.1,.25,1]},y=[0,1,2],t[11]=v,t[12]=y):(v=t[11],y=t[12]);let u;t[13]!==c||t[14]!==a?(u=y.map(n=>o.jsx(O.div,{layout:!0,initial:{scale:0},animate:{scale:a.includes(n)?1:0},transition:{duration:.6,ease:"easeOut",layout:{duration:.5,ease:[.25,.1,.25,1]}},className:"flex items-center justify-center",style:{"--demo-size":"min(calc((100vw - 8rem) / 3), calc((100vh - 8rem)))"},children:o.jsx(fe,{algorithm:c,className:"demo-flex-responsive !p-1",startDelay:n*200})},n)),t[13]=c,t[14]=a,t[15]=u):u=t[15];let f;t[16]!==h||t[17]!==u?(f=o.jsx(ue,{children:o.jsx(O.div,{className:"flex items-center justify-center gap-4",animate:h,transition:v,children:u})}),t[16]=h,t[17]=u,t[18]=f):f=t[18];let x;t[19]===Symbol.for("react.memo_cache_sentinel")?(x=o.jsx("style",{children:`
        .demo-flex-responsive .relative.aspect-square {
          height: var(--demo-size) !important;
          width: var(--demo-size) !important;
        }
        .demo-flex-responsive {
          width: var(--demo-size) !important;
          height: var(--demo-size) !important;
        }
      `}),t[19]=x):x=t[19];let g;return t[20]!==f?(g=o.jsx("div",{className:"flex h-screen w-screen cursor-none flex-col items-center justify-center bg-black",children:o.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 bg-black p-4",children:[f,x]})}),t[20]=f,t[21]=g):g=t[21],g}const Ne=xe;export{Ne as component};
