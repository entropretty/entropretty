import{c as L,r as I,j as i,L as C,u as z}from"./main-D_QOtJ75.js";import{L as K}from"./LikeButton-Bzkwyt-l.js";import{A as q}from"./AlgorithmInfo-4eJFaIHW.js";import{F as D}from"./FamilyKindBadge-rjTMkzGm.js";import{B as E}from"./button-BnWcWO71.js";import{A as R}from"./AlgorithmBitmap-CUFHLwpA.js";import{u as M,S as O}from"./useDisplaySizes-DoYTHURn.js";import{a as N,s as $}from"./index-BzRZEjlo.js";function Y(o){const e=L.c(45),{algorithm:t}=o,{single:d,grid:m}=M();let a;e[0]!==t.family_kind?(a=N(t.family_kind,4),e[0]=t.family_kind,e[1]=a):a=e[1];let n;e[2]!==t.family_kind?(n=N(t.family_kind,3),e[2]=t.family_kind,e[3]=n):n=e[3];let l;e[4]!==t.family_kind?(l=N(t.family_kind,3),e[4]=t.family_kind,e[5]=l):l=e[5];let r;e[6]!==a||e[7]!==n||e[8]!==l?(r=[...a,...n,...l],e[6]=a,e[7]=n,e[8]=l,e[9]=r):r=e[9];const[s,f]=I.useState(r);if(!t.id)return null;const A=`/a/${t.id}`,S=s[0];let c;e[10]!==S?(c=$(S),e[10]=S,e[11]=c):c=e[11];const F=s[0];let x;e[12]!==t.id||e[13]!==d||e[14]!==c||e[15]!==F?(x=i.jsx("div",{className:"flex aspect-square items-center justify-center",children:i.jsx(R,{algorithmId:t.id,seed:F,size:d,scale:2},c)}),e[12]=t.id,e[13]=d,e[14]=c,e[15]=F,e[16]=x):x=e[16];let u;if(e[17]!==t.id||e[18]!==m||e[19]!==s){let w;e[21]!==t.id||e[22]!==m?(w=B=>i.jsx(R,{algorithmId:t.id,seed:B,size:m,scale:2},$(B)),e[21]=t.id,e[22]=m,e[23]=w):w=e[23],u=s.slice(1,10).map(w),e[17]=t.id,e[18]=m,e[19]=s,e[20]=u}else u=e[20];let y;e[24]!==u?(y=i.jsx("div",{className:"flex h-full w-full items-center justify-center",children:i.jsx("div",{className:"grid grid-cols-3 items-center justify-center gap-4",children:u})}),e[24]=u,e[25]=y):y=e[25];let b;e[26]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsx("div",{className:"absolute bottom-2 right-2 flex flex-row"}),e[26]=b):b=e[26];let h;e[27]!==y||e[28]!==x?(h=i.jsxs("div",{className:"relative flex flex-col items-center justify-center gap-4 p-4 md:flex-row",children:[x,y,b]}),e[27]=y,e[28]=x,e[29]=h):h=e[29];let p;e[30]!==h||e[31]!==A?(p=i.jsx(C,{to:A,children:h}),e[30]=h,e[31]=A,e[32]=p):p=e[32];let j;e[33]!==t.family_kind?(j=i.jsx(D,{familyKind:t.family_kind,className:"absolute left-0 top-[-22px]"}),e[33]=t.family_kind,e[34]=j):j=e[34];let k,g;e[35]!==t?(k=i.jsx(q,{algorithm:t}),g=i.jsx(T,{algorithm:t,setSeedFamily:f}),e[35]=t,e[36]=k,e[37]=g):(k=e[36],g=e[37]);let _;e[38]!==j||e[39]!==k||e[40]!==g?(_=i.jsxs("div",{className:"border-background-200 relative flex flex-row items-center justify-between gap-y-2 border-t p-4",children:[j,k,g]}),e[38]=j,e[39]=k,e[40]=g,e[41]=_):_=e[41];let v;return e[42]!==p||e[43]!==_?(v=i.jsxs("div",{className:"border-background-200 flex w-full flex-col border",children:[p,_]}),e[42]=p,e[43]=_,e[44]=v):v=e[44],v}const T=o=>{const e=L.c(14),{algorithm:t,setSeedFamily:d}=o,{user:m}=z();let a;e[0]!==t.family_kind||e[1]!==d?(a=()=>{d([...N(t.family_kind).map(X)])},e[0]=t.family_kind,e[1]=d,e[2]=a):a=e[2];const n=a;let l;e[3]!==n?(l=i.jsx(E,{variant:"ghost",onClick:n,children:"REROLL"}),e[3]=n,e[4]=l):l=e[4];let r;e[5]!==t.id||e[6]!==m?(r=m&&i.jsx(E,{asChild:!0,variant:"link",children:i.jsx(C,{to:`/create?remix=${t.id}`,children:"REMIX"})}),e[5]=t.id,e[6]=m,e[7]=r):r=e[7];let s;e[8]!==t?(s=i.jsx("div",{className:"hidden md:block",children:i.jsx(K,{algorithm:t})}),e[8]=t,e[9]=s):s=e[9];let f;return e[10]!==l||e[11]!==r||e[12]!==s?(f=i.jsxs("div",{className:"flex w-auto flex-row items-center justify-end gap-2 md:w-auto",children:[l,r,s]}),e[10]=l,e[11]=r,e[12]=s,e[13]=f):f=e[13],f};function X(o){return[...o]}function Z(){const o=L.c(1);let e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(e=i.jsx(O,{className:"flex h-[665px] w-screen rounded-none sm:h-[438px] sm:w-[680px]"}),o[0]=e):e=o[0],e}export{Y as A,Z as a};
