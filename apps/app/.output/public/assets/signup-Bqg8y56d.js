import{r as l,j as e,c as O,u as U,a as q,t as N}from"./main-D_QOtJ75.js";import{u as z,t as K,z as j,L as k}from"./label-CqcMyrRf.js";import{C as X,a as $,b as G,c as V,d as Y,H as J}from"./card-BjFbz_C2.js";import{u as Q,B as A}from"./button-BnWcWO71.js";import{I as S}from"./input-DbyYkZn1.js";import{c as W,u as Z,a as I,b as ee}from"./index-DRhfWXIf.js";import{u as se}from"./index-BG3MwORJ.js";import{P as te}from"./index-VFJwB_HZ.js";import{P as _}from"./index-CtIrN4Eb.js";import{c as R}from"./utils-CjfV1Qjd.js";import{c as re}from"./createLucideIcon-4ydf6LMZ.js";var E="Checkbox",[ae]=W(E),[oe,ne]=ae(E),T=l.forwardRef((t,d)=>{const{__scopeCheckbox:s,name:n,checked:o,defaultChecked:r,required:c,disabled:a,value:C="on",onCheckedChange:m,form:g,...v}=t,[i,h]=l.useState(null),u=Q(d,p=>h(p)),f=l.useRef(!1),x=i?g||!!i.closest("form"):!0,[y=!1,P]=Z({prop:o,defaultProp:r,onChange:m}),M=l.useRef(y);return l.useEffect(()=>{const p=i?.form;if(p){const w=()=>P(M.current);return p.addEventListener("reset",w),()=>p.removeEventListener("reset",w)}},[i,P]),e.jsxs(oe,{scope:s,state:y,disabled:a,children:[e.jsx(_.button,{type:"button",role:"checkbox","aria-checked":b(y)?"mixed":y,"aria-required":c,"data-state":B(y),"data-disabled":a?"":void 0,disabled:a,value:C,...v,ref:u,onKeyDown:I(t.onKeyDown,p=>{p.key==="Enter"&&p.preventDefault()}),onClick:I(t.onClick,p=>{P(w=>b(w)?!0:!w),x&&(f.current=p.isPropagationStopped(),f.current||p.stopPropagation())})}),x&&e.jsx(ce,{control:i,bubbles:!f.current,name:n,value:C,checked:y,required:c,disabled:a,form:g,style:{transform:"translateX(-100%)"},defaultChecked:b(r)?!1:r})]})});T.displayName=E;var D="CheckboxIndicator",L=l.forwardRef((t,d)=>{const{__scopeCheckbox:s,forceMount:n,...o}=t,r=ne(D,s);return e.jsx(te,{present:n||b(r.state)||r.state===!0,children:e.jsx(_.span,{"data-state":B(r.state),"data-disabled":r.disabled?"":void 0,...o,ref:d,style:{pointerEvents:"none",...t.style}})})});L.displayName=D;var ce=t=>{const{control:d,checked:s,bubbles:n=!0,defaultChecked:o,...r}=t,c=l.useRef(null),a=se(s),C=ee(d);l.useEffect(()=>{const g=c.current,v=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(v,"checked").set;if(a!==s&&h){const u=new Event("click",{bubbles:n});g.indeterminate=b(s),h.call(g,b(s)?!1:s),g.dispatchEvent(u)}},[a,s,n]);const m=l.useRef(b(s)?!1:s);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o??m.current,...r,tabIndex:-1,ref:c,style:{...t.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(t){return t==="indeterminate"}function B(t){return b(t)?"indeterminate":t?"checked":"unchecked"}var F=T,ie=L;/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],de=re("check",le),H=l.forwardRef((t,d)=>{const s=O.c(10);let n,o;s[0]!==t?({className:n,...o}=t,s[0]=t,s[1]=n,s[2]=o):(n=s[1],o=s[2]);let r;s[3]!==n?(r=R("border-primary focus-visible:ring-ring data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground peer h-4 w-4 shrink-0 border shadow focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",n),s[3]=n,s[4]=r):r=s[4];let c;s[5]===Symbol.for("react.memo_cache_sentinel")?(c=e.jsx(ie,{className:R("flex items-center justify-center text-current"),children:e.jsx(de,{className:"h-4 w-4"})}),s[5]=c):c=s[5];let a;return s[6]!==o||s[7]!==d||s[8]!==r?(a=e.jsx(F,{ref:d,className:r,...o,children:c}),s[6]=o,s[7]=d,s[8]=r,s[9]=a):a=s[9],a});H.displayName=F.displayName;const me=j.object({email:j.string().email("Please enter a valid email address"),password:j.string().min(6,"Password must be at least 6 characters"),confirmPassword:j.string().min(1,"Please confirm your password"),termsAgreed:j.boolean().refine(t=>t===!0,{message:"The licensing terms need to be accepted"})}).refine(t=>t.password===t.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function ue(){const[t,d]=l.useState(null),[s,n]=l.useState(),o=l.useRef(null),{signUp:r}=U(),c=q(),{register:a,handleSubmit:C,formState:{errors:m,isSubmitting:g}}=z({resolver:K(me)}),v=async i=>{if(!s){d("Please complete the captcha");return}try{await r(i.email,i.password,s),o.current?.resetCaptcha(),N.success("Account created successfully",{duration:1/0,dismissible:!0,action:{label:"Dismiss",onClick:()=>N.dismiss()}}),d(null),c("/")}catch(h){o.current?.resetCaptcha();let u="An error occurred while creating your account",f="Please try again or contact support if the problem persists.";if(h instanceof Error){const x=h.message.toLowerCase();x.includes("user already registered")||x.includes("already registered")?(u="Account already exists",f="An account with this email already exists. Try signing in instead."):x.includes("invalid email")?(u="Invalid email address",f="Please enter a valid email address."):x.includes("password")?(u="Password requirements not met",f="Password must be at least 6 characters long."):x.includes("captcha")?(u="Captcha verification failed",f="Please complete the captcha verification again."):x.includes("rate limit")?(u="Too many attempts",f="Please wait a moment before trying again."):u=h.message}N.error(u,{description:f,duration:8e3,dismissible:!0,action:u==="Account already exists"?{label:"Sign In",onClick:()=>c("/login")}:void 0}),console.error("Sign up error:",h)}};return e.jsx("div",{className:"container flex h-[100vh] w-full items-center justify-center",children:e.jsxs(X,{className:"mx-auto w-full max-w-md",children:[e.jsxs($,{className:"space-y-1",children:[e.jsx(G,{className:"text-2xl font-bold",children:"Create an account"}),e.jsx(V,{children:"Enter your email below to create your account"})]}),e.jsxs(Y,{children:[e.jsxs("form",{onSubmit:C(v),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"email",children:"Email"}),e.jsx(S,{id:"email",type:"email",placeholder:"gavin@entropretty.com",...a("email")}),m.email?.message&&e.jsx("p",{className:"text-destructive text-sm",children:String(m.email.message)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"password",children:"Password"}),e.jsx(S,{id:"password",type:"password",...a("password")}),m.password?.message&&e.jsx("p",{className:"text-destructive text-sm",children:String(m.password.message)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(S,{id:"confirmPassword",type:"password",...a("confirmPassword")}),m.confirmPassword?.message&&e.jsx("p",{className:"text-destructive text-sm",children:String(m.confirmPassword.message)})]}),e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx(H,{id:"terms",className:"mt-1",onCheckedChange:i=>{a("termsAgreed").onChange({target:{name:"termsAgreed",value:i}})}}),e.jsxs(k,{htmlFor:"terms",className:"text-sm",children:["I agree to license my submitted code under"," ",e.jsx("a",{href:"https://creativecommons.org/licenses/by-nc-sa/4.0/",target:"_blank",rel:"noopener noreferrer",className:"text-primary underline",children:"CC BY-NC-SA 4.0"}),"."]})]}),m.termsAgreed?.message&&e.jsx("p",{className:"text-destructive text-sm",children:String(m.termsAgreed.message)}),e.jsx("div",{className:"flex justify-center",children:e.jsx(J,{ref:o,sitekey:"07c0e734-3642-4f8a-a830-89105772bc7e",onVerify:i=>n(i)})}),t&&e.jsx("div",{className:"text-destructive text-sm",children:t}),e.jsx(A,{type:"submit",className:"w-full",disabled:g,children:"CREATE ACCOUNT"})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-4 text-center text-sm",children:[e.jsx("div",{children:"Already have an account?"}),e.jsx(A,{variant:"ghost",onClick:()=>c("/login"),children:"SIGN IN"})]})]})]})})}const ke=ue;export{ke as component};
