import{c as y,s as b,j as l,r as x}from"./main-D_QOtJ75.js";import{G as E}from"./GalleryAlgorithm-_HssrdwY.js";import{u as I}from"./index-DFufhFO-.js";import{u as $}from"./useQuery-tapXCO0W.js";import"./useAlgorithm-XwL09dTX.js";import"./FamilyKindBadge-rjTMkzGm.js";import"./utils-CjfV1Qjd.js";import"./button-BnWcWO71.js";import"./AlgorithmBitmap-CUFHLwpA.js";import"./index-BzRZEjlo.js";import"./useDisplaySizes-DoYTHURn.js";import"./useUsersLikes-BZbDMPmT.js";import"./createLucideIcon-4ydf6LMZ.js";import"./useBaseQuery-BJjxcAKU.js";function v(){const e=y.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t={queryKey:["algorithms","ids","top-scored"],queryFn:q,staleTime:3e5},e[0]=t):t=e[0],$(t)}async function q(){const{data:e,error:t}=await b.from("algorithm_scores").select("algorithm_id, quality_score, algorithms_with_user_profile!inner(id)").order("quality_score",{ascending:!1}).order("algorithm_id",{ascending:!1});if(t)throw t;return(e??[]).map(N).filter(A)}function A(e){return e!==null}function N(e){return e.algorithm_id}function G(){const e=y.c(19);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0];const[o,j]=x.useState(t);let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n={threshold:0,rootMargin:"400px"},e[1]=n):n=e[1];const{ref:_,inView:c}=I(n),{data:r}=v();console.log({algorithmIds:o,availableAlgorithmIds:r});let a,m;e[2]!==r?(a=()=>{if(!r)return;const g=r.slice(0,128);j(g)},m=[r],e[2]=r,e[3]=a,e[4]=m):(a=e[3],m=e[4]),x.useEffect(a,m);let f;e[5]!==o.length||e[6]!==r?(f=()=>{if(!r)return;const g=o.length,w=r.slice(g,g+64);w.length>0&&j(S=>[...S,...w])},e[5]=o.length,e[6]=r,e[7]=f):f=e[7];const u=f;let p,d;e[8]!==c||e[9]!==u?(p=()=>{c&&u()},d=[c,u],e[8]=c,e[9]=u,e[10]=p,e[11]=d):(p=e[10],d=e[11]),x.useEffect(p,d);let i;e[12]!==o?(i=o.map(C),e[12]=o,e[13]=i):i=e[13];let s;e[14]!==_?(s=l.jsx("div",{ref:_,className:"h-4 w-full"}),e[14]=_,e[15]=s):s=e[15];let h;return e[16]!==i||e[17]!==s?(h=l.jsx("div",{className:"mx-auto my-4",children:l.jsxs("div",{className:"grid grid-cols-1 justify-center gap-4 md:grid-cols-2 lg:grid-cols-3",children:[i,s]})}),e[16]=i,e[17]=s,e[18]=h):h=e[18],h}function C(e,t){return l.jsx(E,{algorithmId:e},`${e}-${t}`)}function M(){const e=y.c(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=l.jsx("div",{className:"flex h-screen w-full flex-col",children:l.jsx(G,{})}),e[0]=t):t=e[0],t}const O=M;export{O as component};
