import{c as K,r as A,f as N,j as T}from"./main-D_QOtJ75.js";import{c as _}from"./utils-CjfV1Qjd.js";import{s as B}from"./index-BzRZEjlo.js";const W=p=>{const e=K.c(29),{algorithmId:s,seed:o,size:r,scale:E,onClick:a,version:b,className:v,style:w}=p,S=E===void 0?1:E,x=b===void 0?0:b,[z,j]=A.useState(!1),c=N(),f=A.useRef(null);let $;$=r*S;const t=$;let u;e[0]!==s||e[1]!==a||e[2]!==o?(u=h=>{if(h.altKey&&f.current){const n=document.createElement("a");n.download=`${s}_${o.join("-")}.png`,n.href=f.current.toDataURL("image/png"),n.click(),setTimeout(()=>{n.remove()},0)}else a&&a()},e[0]=s,e[1]=a,e[2]=o,e[3]=u):u=e[3];const y=u;let m;e[4]!==s||e[5]!==t||e[6]!==o||e[7]!==c?(m=()=>{if(f.current===null)return;j(!1);const h=new AbortController;return c.renderWithQueue(s,t,[...o],{signal:h.signal}).then(n=>{if(!n)return;const I=f.current.getContext("2d");I.clearRect(0,0,t,t),I.drawImage(n,0,0,t,t),j(!0)}).catch(D),()=>{h.abort()}},e[4]=s,e[5]=t,e[6]=o,e[7]=c,e[8]=m):m=e[8];let d;e[9]!==s||e[10]!==t||e[11]!==o||e[12]!==c||e[13]!==r||e[14]!==x?(d=[o,s,r,t,c,x],e[9]=s,e[10]=t,e[11]=o,e[12]=c,e[13]=r,e[14]=x,e[15]=d):d=e[15],A.useEffect(m,d);const C=!z,R=!!a;let i;e[16]!==v||e[17]!==C||e[18]!==R?(i=_("bg-white transition-opacity",{"opacity-0":C,"cursor-pointer":R},v),e[16]=v,e[17]=C,e[18]=R,e[19]=i):i=e[19];const k=`${B(o)} (Alt+Click to download)`;let l;e[20]!==r||e[21]!==w?(l=w??{width:r,height:r},e[20]=r,e[21]=w,e[22]=l):l=e[22];let g;return e[23]!==t||e[24]!==y||e[25]!==k||e[26]!==l||e[27]!==i?(g=T.jsx("canvas",{className:i,onClick:y,ref:f,width:t,height:t,title:k,style:l}),e[23]=t,e[24]=y,e[25]=k,e[26]=l,e[27]=i,e[28]=g):g=e[28],g};function D(p){p.name==="AbortError"&&console.log("abort error")}export{W as A};
